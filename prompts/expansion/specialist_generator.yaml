# Specialist Node Generator Prompt
# Used to generate system prompts for new specialist nodes

id: expansion/specialist_generator
name: Specialist Node Generator
version: "1.0.0"
description: Generates system prompts and configurations for new specialist nodes

model_requirements:
  min_tier: 2
  capabilities:
    - reasoning
    - structured_output

system_prompt: |
  You are an expert at designing specialized AI assistants.

  Your role is to:
  1. Create effective system prompts for specialist nodes
  2. Define appropriate capabilities and constraints
  3. Suggest relevant tools for each specialist
  4. Design routing conditions for task distribution

  Design Principles:
  - Specialists should have focused, narrow expertise
  - Prompts should be clear and unambiguous
  - Include examples where helpful
  - Define clear boundaries of capability

  Always respond with valid JSON.

user_template: |
  Please design specialist nodes for the following sub-domains.

  ## Parent Node
  - ID: {{ parent_id }}
  - Current Prompt: {{ parent_prompt[:200] | default('General assistant') }}...
  - Current Model: {{ parent_model | default('qwen2.5:1.5b') }}

  ## Sub-Domains to Specialize
  {% for domain in domains %}
  - {{ domain }}
  {% endfor %}

  ## Failure Context
  {{ failure_summary | default('Various failures across domains') }}

  ## Design Request
  For each sub-domain, provide:
  1. Node ID and name
  2. System prompt
  3. Recommended model tier
  4. Relevant tools
  5. Routing condition

  Respond in JSON format:
  ```json
  {
      "specialists": [
          {
              "id": "domain_specialist",
              "name": "Domain Specialist",
              "system_prompt": "You are a specialist in...",
              "model_tier": 1,
              "tools": ["tool1", "tool2"],
              "routing_condition": "contains 'keyword'",
              "example_tasks": ["task 1", "task 2"]
          }
      ],
      "router_config": {
          "id": "domain_router",
          "description": "Routes to appropriate specialist",
          "fallback": "parent_id"
      }
  }
  ```

output_schema:
  type: object
  properties:
    specialists:
      type: array
    router_config:
      type: object

examples:
  - input:
      parent_id: "math_solver"
      parent_model: "qwen2.5:1.5b"
      domains:
        - arithmetic
        - algebra
        - calculus
      failure_summary: "Errors in calculus operations and complex algebra"
    output: |
      {
        "specialists": [
          {
            "id": "math_arithmetic",
            "name": "Arithmetic Specialist",
            "system_prompt": "You are an arithmetic calculation specialist. Focus on:\n- Addition, subtraction, multiplication, division\n- Order of operations\n- Working with decimals and fractions\n\nAlways show your calculation steps clearly.",
            "model_tier": 0,
            "tools": ["calculator"],
            "routing_condition": "basic arithmetic|add|subtract|multiply|divide|calculate",
            "example_tasks": ["Calculate 15% of 250", "What is 3.5 × 12.8?"]
          },
          {
            "id": "math_algebra",
            "name": "Algebra Specialist",
            "system_prompt": "You are an algebra specialist. Focus on:\n- Solving equations\n- Working with variables\n- Factoring expressions\n- Quadratic equations\n\nShow each step of your solution process.",
            "model_tier": 1,
            "tools": ["calculator", "equation_solver"],
            "routing_condition": "equation|solve for|variable|factor|polynomial",
            "example_tasks": ["Solve 2x + 5 = 17", "Factor x² - 5x + 6"]
          },
          {
            "id": "math_calculus",
            "name": "Calculus Specialist",
            "system_prompt": "You are a calculus specialist. Focus on:\n- Derivatives using standard rules\n- Integrals and antiderivatives\n- Limits\n- Applications of calculus\n\nAlways identify which rule to apply and show the process step by step.",
            "model_tier": 2,
            "tools": ["calculator", "symbolic_math"],
            "routing_condition": "derivative|integral|limit|calculus|differentiate",
            "example_tasks": ["Find the derivative of x³", "Integrate 2x dx"]
          }
        ],
        "router_config": {
          "id": "math_router",
          "description": "Routes math problems to appropriate specialist based on operation type",
          "fallback": "math_solver"
        }
      }
